C:\Users\Chloe Quinto\Desktop\390\Lab 3\3.2.lst - generated by MGTEK Assembler ASM12 V1.26 Build 144 for WIN32 (x86) - Mon Mar 05 16:15:52 2018

    1:          =00000020              space:  EQU     $20
    2:          =0000000D              CR:     EQU     $0D
    3:          =0000000A              LF:     EQU     $0A
    4:                                 
    5:          =00005000                      ORG     $5000
    6:     5000 +0001                  ch_cnt: ds.b    1 ;character count
    7:     5001 +0001                  wd_cnt: ds.b    1 ;word count
    8:     5002 4D 61 72 69 61 6D      str_x:  dc.b    "Mariam", 0
           5008 00 
    9:     5009 0D 0A 00               str_y:  dc.b    CR, LF, 0
   10:                                 
   11:          =00004000                      ORG     $4000
   12:     4000 CE 5002                        ldx     #str_x ;X is character pointer
   13:     4003 16 6000                        jsr     count 
   14:     4006 B6 5000                        ldaa    ch_cnt
   15:     4009 16 6035                        jsr     puthx8
   16:     400C CE 5009                        ldx     #str_y
   17:     400F 16 6022                        jsr     putstr
   18:     4012 B6 5001                        ldaa    wd_cnt
   19:     4015 16 6035                        jsr     puthx8
   20:     4018 CE 5009                        ldx     #str_y
   21:     401B 16 6022                        jsr     putstr
   22:     401E 3F                             swi
   23:                                 
   24:          =00006000                      ORG     $6000
   25:     6000 79 5000                count:  clr     ch_cnt ;clear character count
   26:     6003 79 5001                        clr     wd_cnt ;clear word count
   27:     6006 E6 30                  str_lp: ldab    1,x+ ;read a character
   28:     6008 27 17                          beq     done ;end of string?
   29:     600A 72 5000                        inc     ch_cnt ;increment character count
   30:     600D C1 20                          cmpb    #space ;check for space character
   31:     600F 27 F5                          beq     str_lp
   32:     6011 72 5001                        inc     wd_cnt ;found non-space: must be at start of word
   33:     6014 E6 30                  wd_lp: ldab     1,x+ ;read a character
   34:     6016 27 09                          beq     done ;end of string?
   35:     6018 72 5000                        inc     ch_cnt ;increment character count
   36:     601B C1 20                          cmpb    #space ;check for space character
   37:     601D 27 E7                          beq     str_lp
   38:     601F 20 F3                          bra     wd_lp ;non-space character is part of word
   39:     6021 3D                     done:   rts     
   40:                                 
   41:          =000000CC              SCIOSR1: EQU    $00CC
   42:          =000000CF              SCIODRL: EQU    $00CF
   43:     6022 36                     putstr: psha    ; output null terminated string to terminal
   44:     6023 A6 30                  ploop:  ldaa    1, X+ ; X contains pointer to string
   45:     6025 27 05                          beq     pdone
   46:     6027 16 602E                        jsr     putc
   47:     602A 20 F7                          bra     ploop
   48:     602C 32                             pdone:  pula
   49:     602D 3D                             rts
   50:     602E 4F CC 80 FC            putc:   brclr   SCIOSR1, $80, * ; output single character to terminal
   51:     6032 5A CF                          staa    SCIODRL
   52:     6034 3D                             rts
   53:                                 
   54:     6035 36                     puthx8:         psha ; output 8bit value in acc A as two hex digits
   55:     6036 44                             lsra
   56:     6037 44                             lsra
   57:     6038 44                             lsra
   58:     6039 44                             lsra
   59:     603A 16 6044                        jsr     puthx4
   60:     603D 32                             pula
   61:     603E 84 0F                          anda    #$0F
   62:     6040 16 6044                        jsr     puthx4
   63:     6043 3D                             rts
   64:     6044 81 0A                  puthx4: cmpa    #$A ; output 4-bit value in acc A as a hex character
   65:     6046 25 02                          blo     hxnum
   66:     6048 8B 07                          adda    #$7
   67:     604A 8B 30                  hxnum:  adda    #$30
   68:     604C 16 602E                        jsr     putc
   69:     604F 3D                             rts

Symbols:
ch_cnt                          *00005000
count                           *00006000
cr                              *0000000d
done                            *00006021
hxnum                           *0000604a
lf                              *0000000a
pdone                           *0000602c
ploop                           *00006023
putc                            *0000602e
puthx4                          *00006044
puthx8                          *00006035
putstr                          *00006022
sciodrl                         *000000cf
sciosr1                         *000000cc
space                           *00000020
str_lp                          *00006006
str_x                           *00005002
str_y                           *00005009
wd_cnt                          *00005001
wd_lp                           *00006014

